<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Domains // Aether</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg-color: #050505; --panel-bg: #0a0f0d; --border-color: #1a2f25; --text-main: #c0dcd0; --text-muted: #88a095; --accent: #00ff9d; --accent-dim: #00ff9d22; }
        body { background-color: var(--bg-color); color: var(--text-main); font-family: "Rajdhani", sans-serif; }
        .font-mono { font-family: "Share Tech Mono", monospace; }
        .sidebar { background-color: var(--panel-bg); border-right: 1px solid var(--border-color); height: 100vh; padding: 20px; position: fixed; width: 240px; }
        .main-content { margin-left: 240px; padding: 40px; }
        .nav-link { color: var(--text-muted); font-family: "Share Tech Mono"; text-transform: uppercase; padding: 12px 20px; border-radius: 0; }
        .nav-link:hover { color: #fff; background: var(--accent-dim); }
        .nav-link.active { background: var(--accent); color: #000; font-weight: bold; }
        .card { background-color: var(--panel-bg); border: 1px solid var(--border-color); border-radius: 0; padding: 20px; }
        .btn-primary { background-color: var(--accent); color: #000; border: none; font-family: "Share Tech Mono"; font-weight: bold; border-radius: 0; text-transform: uppercase; }
        .table { color: var(--text-main); border-color: var(--border-color); }
        .table thead th { color: var(--accent); font-family: "Share Tech Mono"; border-bottom: 2px solid var(--border-color); }
    </style>
</head>
<body>
<div class="sidebar">
    <h3 class="mb-5 font-mono text-white">AETHER_OS</h3>
    <nav class="nav flex-column">
        <a class="nav-link" href="/">DASHBOARD</a>
        <a class="nav-link active" href="/domains">DOMAINS</a>
        <a class="nav-link" href="/compute">COMPUTE</a>
        <a class="nav-link" href="/storage">STORAGE</a>
        <a class="nav-link" href="/billing">BILLING</a>
    </nav>
</div>
<div class="main-content">
    <div class="d-flex justify-content-between align-items-center mb-5 border-bottom border-secondary pb-3">
        <h2 class="font-mono text-white">// DOMAIN_CONTROL</h2>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#domainModal">REGISTER_NEW</button>
    </div>
    <div class="card">
        <table class="table table-hover align-middle">
            <thead><tr><th>NODE_URI</th><th>POINTS_TO</th><th>STATUS</th><th>ACTIONS</th></tr></thead>
            <tbody>
                {% for d in domains %}
                <tr>
                    <td><strong>{{ d.domain_name }}</strong></td>
                    <td class="font-mono small">{{ d.ip_address }}</td>
                    <td><span class="badge bg-success text-black font-mono">ONLINE</span></td>
                    <td>
                        <button class="btn btn-sm btn-outline-info font-mono" data-bs-toggle="modal" data-bs-target="#ipModal{{ d.id }}">UPDATE_IP</button>
                    </td>
                </tr>

                <!-- IP Modal -->
                <div class="modal fade" id="ipModal{{ d.id }}" tabindex="-1">
                  <div class="modal-dialog">
                    <div class="modal-content bg-dark border-secondary rounded-0">
                      <form action="/domains/update_ip" method="post">
                        <input type="hidden" name="domain_id" value="{{ d.id }}">
                        <div class="modal-header border-secondary"><h5 class="font-mono text-white">RECONFIGURE_NODE</h5></div>
                        <div class="modal-body">
                            <label class="font-mono text-muted small mb-2">TARGET_IP_ADDRESS</label>
                            <input type="text" name="new_ip" class="form-control bg-black border-secondary text-white rounded-0 font-mono" value="{{ d.ip_address }}" required>
                            <p class="text-muted small mt-2">Default Hosting: 10.5.0.15</p>
                        </div>
                        <div class="modal-footer border-secondary">
                            <button type="submit" class="btn btn-primary">REWRITE_DNS</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>

                {% else %}
                <tr><td colspan="4" class="text-center text-muted font-mono py-4">// NO_RECORDS_FOUND</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<div class="modal fade" id="domainModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content bg-dark border-secondary rounded-0">
      <form action="/domains/purchase" method="post">
        <div class="modal-header border-secondary"><h5 class="font-mono text-white">PROVISION_DOMAIN</h5></div>
        <div class="modal-body">
            <p class="font-mono text-muted small">NETWORK_FEE: 50.00 VOX</p>
            <input type="text" name="domain" class="form-control bg-black border-secondary text-white rounded-0 font-mono" placeholder="alias.psx" required>
        </div>
        <div class="modal-footer border-secondary">
            <button type="submit" class="btn btn-primary">START_CHECKOUT</button>
        </div>
      </form>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
