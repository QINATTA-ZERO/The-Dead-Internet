<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flux // Merchant Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #050505;
            --panel-bg: #0a0f0d;
            --border-color: #1a2f25;
            --text-main: #c0dcd0;
            --text-muted: #88a095;
            --accent: #ffcc00; /* Gold for Flux */
            --accent-dim: #ffcc0022;
        }
        body { background-color: var(--bg-color); color: var(--text-main); font-family: "Rajdhani", sans-serif; }
        .font-mono { font-family: "Share Tech Mono", monospace; }
        
        .navbar { background-color: var(--panel-bg); border-bottom: 1px solid var(--border-color); }
        .navbar-brand { font-family: "Share Tech Mono"; color: var(--accent) !important; letter-spacing: 2px; font-weight: bold; }
        
        .sidebar { background-color: var(--panel-bg); border-right: 1px solid var(--border-color); height: 100vh; padding: 20px; position: fixed; width: 240px; }
        .main-content { margin-left: 240px; padding: 40px; }
        
        .nav-link { color: var(--text-muted); font-family: "Share Tech Mono"; text-transform: uppercase; padding: 12px 20px; border-radius: 0; }
        .nav-link:hover { color: #fff; background: var(--accent-dim); }
        .nav-link.active { background: var(--accent); color: #000; font-weight: bold; }
        
        .card { background-color: var(--panel-bg); border: 1px solid var(--border-color); border-radius: 0; padding: 20px; margin-bottom: 20px; }
        .api-key { background: #000; padding: 10px; border: 1px dashed var(--border-color); font-family: "Share Tech Mono"; font-size: 0.9rem; color: var(--accent); }
        
        .btn-primary { background-color: var(--accent); color: #000; border: none; font-family: "Share Tech Mono"; font-weight: bold; border-radius: 0; text-transform: uppercase; }
        .btn-primary:hover { background-color: #e6b800; box-shadow: 0 0 15px var(--accent); }
        
        .table { color: var(--text-main); border-color: var(--border-color); }
        .table thead th { color: var(--accent); font-family: "Share Tech Mono"; border-bottom: 2px solid var(--border-color); }
    </style>
</head>
<body>

<div class="sidebar">
    <h3 class="mb-5 font-mono text-white">FLUX_PORTAL</h3>
    <nav class="nav flex-column">
        <a class="nav-link {% if active_tab == 'home' %}active{% endif %}" href="/">DASHBOARD</a>
        <a class="nav-link {% if active_tab == 'payments' %}active{% endif %}" href="/payments">PAYMENTS</a>
        <a class="nav-link {% if active_tab == 'balances' %}active{% endif %}" href="/balances">BALANCES</a>
        <a class="nav-link {% if active_tab == 'developers' %}active{% endif %}" href="/developers">DEVELOPERS</a>
    </nav>
</div>

<div class="main-content">
    <div class="d-flex justify-content-between align-items-center mb-5 border-bottom border-secondary pb-3">
        <h2 class="font-mono text-white">// MERCHANT_OVERVIEW</h2>
        <div class="d-flex align-items-center">
            <a href="/docs" class="nav-link font-mono text-muted me-4">INTEGRATION_MANUAL</a>
            <span class="me-4 font-mono text-muted">ID: {{ user }}</span>
            <a href="/logout" class="btn btn-sm btn-outline-secondary rounded-0 font-mono">LOGOUT</a>
        </div>
    </div>

    <div class="row">
        <div class="col-md-8">
            <div class="card shadow-lg">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h5 class="font-mono text-white">ACTIVE_MERCHANTS</h5>
                    <button class="btn btn-sm btn-primary px-3" data-bs-toggle="modal" data-bs-target="#merchantModal">+ NEW_ENTITY</button>
                </div>
                <table class="table align-middle">
                    <thead><tr><th>ENTITY_NAME</th><th>ACCESS_KEY</th></tr></thead>
                    <tbody>
                        {% for m in merchants %}
                        <tr>
                            <td><strong>{{ m.name }}</strong></td>
                            <td><div class="api-key">{{ m.api_key }}</div></td>
                        </tr>
                        {% else %}
                        <tr><td colspan="2" class="text-center text-muted font-mono py-5">// NO_ENTITIES_REGISTERED</td></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="merchantModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content bg-dark border-secondary rounded-0">
      <form action="/merchants/create" method="post">
        <div class="modal-header border-secondary"><h5 class="font-mono text-white">REGISTER_MERCHANT</h5></div>
        <div class="modal-body">
            <input type="text" name="name" class="form-control bg-black border-secondary text-white rounded-0" placeholder="BUSINESS_ALIAS" required>
        </div>
        <div class="modal-footer border-secondary">
            <button type="submit" class="btn btn-primary">INITIALIZE_ACCOUNT</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
